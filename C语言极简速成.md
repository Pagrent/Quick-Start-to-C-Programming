# C语言快速入门（通用C版）

新手学C语言就像学盖普通住宅——变量、循环、函数等是盖房子的核心“砖块、水泥、结构”，掌握这些就能搭建出所有基础C程序。下面用生活化的比喻，按核心知识点顺序讲透内容，全程避开复杂术语，只讲新手必须会的内容。

## 1. 变量：给内存“房间”起名字

### 比喻

计算机的内存就像一栋无限大的“数字楼房”，每一个最小的存储单元是“1平米的小房间”（1字节），房间有唯一的“门牌号”（内存地址，比如0x7ffeefbff5c4这类十六进制数）。

- **声明变量**：告诉计算机“我要占用这个/这些房间，并且给它起个名字”；
- **变量类型**：房间的“户型”——不同户型能装的东西不一样（比如char是1平米小单间，只能装1个字符；int是4平米大房间，能装整数；float是带刻度的房间，能装小数）；
- **赋值**：往房间里放东西；
- **变量名**：给房间起的“昵称”（比如用`temp`代表温度，比直接记门牌号0x7ffeefbff5c4好记100倍）。

### 示例

```c
#include <stdio.h>  // 通用C需要的输入输出头文件

int main() {
    // 声明不同类型的变量（占用不同户型的房间）
    char gender;       // 1字节房间，存性别（'M'=男，'F'=女）
    int age;           // 4字节房间，存年龄（比如25岁）
    float height;      // 4字节带刻度房间，存身高（比如175.5cm）

    // 赋值：往房间里放东西
    gender = 'M';
    age = 25;
    height = 175.5f;  // 注意float赋值要加f

    // 打印变量（查看房间里的东西）
    printf("性别：%c\n", gender);
    printf("年龄：%d\n", age);
    printf("身高：%.fcm\n", height);
    return 0;
}
```

### 关键注意点

- 变量名要见名知意（别起a/b/c），比如`user_age`、`product_price`；
- 声明变量时必须指定类型，计算机才知道要分配多大的“房间”。

#### 小贴士：

> c程序的
> 
> ```c
> #include <stdio.h>
> ```
> 
> 意思是“这个程序需要叫做stdio.h的头文件”
> 
> stdio的意思是“标准输入输出”。毕竟我们写的程序肯定是需要输入输出的，所以以后就默认带上这个头文件了。
> 
> ```c
> int main() {
> 
> }
> ```
> 
> 这是c程序的主函数，是程序的“入口”，意思是程序从主函数开始执行，之后说到函数的时候会提到主函数。

## 2. 判断、循环：让程序“做选择、重复做”

如果说变量是“房间”，判断和循环就是“管家”——管家根据规则决定“做什么事”“重复做某件事多少次”。

### 2.1 判断（if/else）：管家做选择

#### 比喻

就像“如果下雨，就带伞；否则，带帽子”——管家根据“条件”执行不同操作。

- 条件：比如“房间里的数是否大于18”（`age > 18`）；
- 执行：条件成立走if分支，不成立走else分支。

#### 示例（判断是否成年）

```c
#include <stdio.h>

int main() {
    int age = 20;  // 定义年龄变量
    char is_adult = 0;  // 0=未成年，1=成年

    // 判断：年龄>=18就是成年人
    if (age >= 18) {
        is_adult = 1;
        printf("年龄：%d，已成年\n", age);
    } else {
        is_adult = 0;
        printf("年龄：%d，未成年\n", age);
    }
    return 0;
}
```

我们只需要理解：

```c
if(条件) {
    条件成立时要做的事;
}
else {
    条件不成立时要做的事;
}
```

```c
if(条件1) {
    条件1成立时要做的事;
}
else if(条件2) {
    条件1不成立（因为条件一成立时已经在上面做过要做的事了），而且条件2成立时要做的事;
}
else {
    都不成立时要做的事
}
```

#### 小插曲：

> **c语言对代码的换行和对齐不敏感**
> 
> 即：
> 
> ```c
> if (age >= 18) {
>     is_adult = 1;
>     printf("年龄：%d，已成年\n", age);
> } else {
>     is_adult = 0;
>     printf("年龄：%d，未成年\n", age);
> }
> ```
> 
> 与
> 
> ```c
> if (age >= 18) {
> is_adult = 1;printf("年龄：%d，已成年\n", age);
> } else {
>     is_adult = 0;
> printf("年龄：%d，未成年\n", age);}
> ```
> 
> 甚至
> 
> ```c
> if(age>=18){is_adult=1;printf("年龄：%d，已成年\n",age);}else{is_adult=0;printf("年龄：%d，未成年\n",age);}
> ```
> 
> 这三者的运行结果都是一样的
> 
> 但是为了代码的可读性，请务必遵循规范写代码，不要乱写
> ~~（点名批评首师大某c程序设计教师）~~：
> 
> > 大括号内一定要右移4个空格（务必）
> > 
> > 运算符（+ - * / & % ! = < > <= >= ==）两边要加空格
> > 
> > 如果同一行内有逗号或分号，后面要加一个空格

### 2.2 循环（for/while）：管家重复做事

#### 比喻

- **for循环**：“明确做N次”——比如“给10个房间依次放数字1-10”；
- **while循环**：“只要条件满足就做”
  比如“只要余额>0，就每次扣10元，直到余额为0”。

#### 示例1：for循环（批量赋值+打印）

```c
#include <stdio.h>

int main() {
    // 循环5次，打印1-5的数字
    for (int i = 0; i < 5; i++) {  // i从0到4，共5次
        printf("当前计数：%d\n", i);
    }

    // 循环给数组（多个连续房间）赋值
    int scores[5];  // 5个int房间，存5个成绩
    for (int j = 0; j < 5; j++) {
        scores[j] = 80 + j * 2;  // 赋值80、82、84、86、88
        printf("第%d个成绩：%d\n", j+1, scores[j]);
    }
    return 0;
}
```

#### 示例2：while循环（持续扣钱）

```c
#include <stdio.h>

int main() {
    int balance = 35;  // 初始余额35元

    // 只要余额>0，就每次扣10元
    while (balance > 0) {
        printf("当前余额：%d元，扣除10元\n", balance);
        balance -= 10;  // 余额减10
    }
    printf("余额已为0，停止扣款\n");
    return 0;
}
```

### 关键注意点

- 循环一定要有“退出条件”，否则会“死循环”（比如`while(1)`会让程序一直运行，需谨慎使用）；
- for循环适合“已知循环次数”的场景，while循环适合“未知循环次数，只知终止条件”的场景。

## 3. 函数：给“一组操作”起个名字

C语言的函数和高中数学里的函数本质逻辑完全一致——数学中我们学过`f(x) = 2x + 1`，给自变量`x`一个值，就能通过固定规则算出唯一的结果；C语言的函数就是把“代码操作”封装成类似的“数学函数规则”，给它传“自变量（参数）”，它就按预设逻辑执行并返回“函数值（返回值）”。

- **函数定义**：对应数学里“定义函数表达式”（比如明确`f(x) = 2x + 1`的规则），写清楚C语言函数要执行的操作、需要的“自变量”（参数）、返回的“函数值”（返回值）；
  
- **函数调用**：对应数学里“代入x求值”（比如计算`f(3)`），调用C语言函数就是给参数传值，让函数执行预设操作；
  
- **参数**：对应数学函数的“自变量”（比如`f(x)`里的`x`，`f(x,y)=x+y`里的`x、y`），是函数执行需要的“输入值”；
  
- **返回值**：对应数学函数的“函数值”（比如`f(3)=7`里的`7`），是函数执行完成后输出的“结果值”。
  举个更贴近的例子：
  数学中定义`S(a,b) = a + b`（求两数之和），计算`S(10,25)`就能得到35；
  C语言里定义`add(int a, int b)`（求两数之和），调用`add(10,25)`也能得到35——两者都是“定规则→传值→得结果”的逻辑。
  

### 示例

```c
#include <stdio.h>

// 函数定义：对应数学里定义S(a,b) = a + b
// 参数a、b：对应数学函数的自变量，返回值：对应数学函数值（int类型）
int add(int a, int b) {
    int result = a + b; // 对应数学里的计算规则a+b
    return result; // 返回函数值，对应数学里S(a,b)的结果
}


// 函数定义：无返回值的函数（类似数学里“只执行规则、不求值”的操作）
// void表示无返回值，如同数学里仅执行“打印a和b的值”，而非计算一个结果
void print_info(char name[], int age) {
    printf("姓名：%s，年龄：%d\n", name, age);
}

int main() {

    // 函数调用：对应数学里计算S(10,25)，得到结果赋值给sum
    int sum = add(10, 25);
    printf("10+25的结果：%d\n", sum); // 输出sum，即S(10,25)=35

    // 函数调用：传入“张三”“25”这两个“自变量”，执行打印操作
    print_info("张三", 25);
    print_info("李四", 30);
    return 0;
}
```

### 关键注意点

- `main()`是“主函数”——类比数学里的“总运算入口”：所有数学题的计算都从“总公式”开始，C语言程序永远从`main()`开始执行，其他函数（如`add`、`print_info`）必须被`main()`调用（如同代入总公式计算）才会运行；
  
- 函数参数要和定义时的类型匹配：如同数学里`f(x)`要求`x`是整数，就不能代入字符串，C语言里`print_info`第一个参数要求字符数组（名字），就不能传数字；
  
- `void`类型函数无返回值：如同数学里有些操作只执行（比如“画坐标系”），不产生具体的数值结果，这类函数不用写`return 结果`，仅需写`return;`（或省略）。
  

## 4. 指针：直接操作“房间门牌号”

指针是C语言的“核心大招”，新手理解起来稍难——掌握指针就能直接操控内存，让程序更灵活。

### 比喻

普通变量是“房间昵称”或“门牌号”，指针变量是“专门存门牌号的房间”——比如：

- `int temp = 25;`：昵称`temp`对应门牌号0x7ffeefbff5c4的房间，里面放25；
- `int *p = &temp;`：指针变量`p`是一个“小房间”，里面只存门牌号——具体存的是`temp`的门牌号（&temp是取`temp`的地址）；
- `*p = 30;`：“解引用”——通过`p`里的门牌号，直接往对应的房间里放30（相当于`temp = 30`）。

### 示例

```c
#include <stdio.h>

int main() {
    // 普通房间：昵称temp，门牌号&temp，内容25
    int temp = 25;
    // 指针房间：p存temp的门牌号（&是“取地址”）
    int *p = &temp;

    printf("temp的昵称值：%d\n", temp);     // 输出25
    printf("temp的门牌号：%p\n", &temp);    // 打印地址（如0x7ffeefbff5c4）
    printf("指针p里的门牌号：%p\n", p);      // 和&temp完全一致
    printf("通过p操作房间：%d\n", *p);       // 解引用，输出25

    // 用指针直接修改房间内容
    *p = 30;
    printf("修改后temp的值：%d\n", temp);    // 输出30

    // 指针指向另一个变量
    int num = 50;
    p = &num;  // 把num的门牌号存入p
    printf("通过p访问num：%d\n", *p);        // 输出50
    return 0;
}
```

### 关键注意点

- 指针的核心是“地址”：`&`是“取地址”（拿房间门牌号），`*`是“解引用”（按门牌号找房间，就像拿着门牌号去找房间并操作里面的东西）；
- 掌握“一级指针”即可，不用深究二级指针、指针数组等复杂用法；
- 指针变量也要指定类型（比如`int *p`），确保操作的“房间户型”匹配。
- 对于`int *p = &temp`，`p`代表存储了门牌号的房间，而`*p`代表`p`存的那个门牌号的房间存的内容（`p`指向的变量的值）

#### 小贴士：

> 你肯定听过`scanf()`这个函数，通常这么使用：
> 
> ```c
> int n;
> scanf("%d", &n);
> ```
> 
> 对吧？
> 
> 其实这里`&n`的&就是取地址的意思。
> 
> 另外，写指针的时候别忘了写&和*

## 5. 宏定义与typedef：给C语言“起别名、做快捷指令”

这两个是C语言的“懒人神器”——让代码更短、更好懂，是大型程序中简化代码的核心手段。

### 5.1 宏定义（#define）：快捷指令/常量别名

#### 比喻

宏定义就像“给长句子起缩写”——比如把“北京市朝阳区建国路88号”缩写成“公司地址”，把“1000000”缩写成“DELAY_TIME”。

- 作用1：定义常量（避免魔法数字，让代码易读）；
- 作用2：定义快捷操作（把一组代码缩写成一个名字）。

#### 示例

```c
#include <stdio.h>

// 作用1：定义常量别名
#define PI 3.14159
#define MAX_SCORE 100
#define GREETING "Hello, C语言！"

// 作用2：定义快捷操作（计算圆的面积），不常用
#define CIRCLE_AREA(r) (PI * r * r)

int main() {
    // 使用常量宏
    printf("圆周率：%.5f\n", PI);
    printf("满分：%d\n", MAX_SCORE);
    printf("问候语：%s\n", GREETING);

    // 使用快捷操作宏
    float r = 5.0f;
    float area = CIRCLE_AREA(r);
    printf("半径为%.1f的圆面积：%.2f\n", r, area);

    // 宏定义的延时操作（模拟耗时）
    #define DELAY() for(int i=0; i<100000; i++);
    DELAY();  // 执行延时（空循环）
    printf("延时完成\n");
    return 0;
}
```

### 5.2 typedef：类型别名

#### 比喻

typedef就像“给户型起别名”——比如把“4平米的int大房间”缩写成“INT”，把“存门牌号的int*房间”缩写成“P_INT”。

- 核心：只改名字，不改类型本质；
- 常用场景：简化复杂类型（比如指针、结构体）的书写。

#### 示例

```c
#include <stdio.h>

// 给基础类型起别名
typedef int INT;
typedef float FLOAT;
// 给指针类型起别名
typedef int* P_INT;
// 给无符号类型起别名
typedef unsigned char uint8_t;
typedef unsigned int uint32_t;

int main() {
    // 用别名定义变量，和原类型完全一致
    INT age = 28;          // 等价于int age = 28;
    FLOAT weight = 65.5f;  // 等价于float weight = 65.5f;
    printf("年龄：%d，体重：%.1fkg\n", age, weight);

    // 用指针别名定义变量
    P_INT p = &age;        // 等价于int *p = &age;
    *p = 29;
    printf("修改后年龄：%d\n", age);

    // 用无符号别名定义变量
    uint8_t num1 = 255;    // 1字节无符号数，范围0-255
    uint32_t num2 = 4294967295U;  // 4字节无符号数
    printf("uint8_t类型值：%u\n", num1);
    printf("uint32_t类型值：%lu\n", num2);
    return 0;
}
```

### 关键注意点

- 宏定义是“预处理替换”（编译前直接替换文本），typedef是“类型重命名”（编译时识别）；
- 宏定义结尾不用加分号，否则会导致替换错误；
- typedef定义的别名是“类型”，不能直接定义常量，和宏定义的用途要区分开。

## 入门核心总结

1. 变量是“内存房间”，类型决定房间大小，变量名是房间昵称；
2. 判断/循环是程序的“逻辑控制”，if做选择、for/while做重复操作；
3. 函数是“封装操作”，把重复代码打包，让程序更简洁、易维护；
4. 指针是“操作地址”，通过门牌号直接操控内存，是C语言的核心特性；
5. 宏定义/typedef是“简化代码”的工具，宏定义替代码、typedef替类型。

学习建议：先写小例子吃透单个知识点（比如先练变量+打印，再练判断+循环），再把多个知识点结合（比如用函数封装循环逻辑、用指针修改函数内的变量），循序渐进就能快速掌握通用C程序的核心用法。

## 之后学什么？

结构体、文件操作、动态内存分配等

C++，Java，Python等更高级的语言

也可以去学STM32等嵌入式内容，本片文档基本上足够嵌入式使用了
